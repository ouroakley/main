{{ define "header" }}
   {{/* We can override any block in the baseof file be defining it in the template */}}
  {{ partial "page-header.html" . }}
{{ end }}

{{ define "main" }}
  {{ $page := . }}
  {{ $section := .Site.GetPage "section" .Section }}
  <div class="mw8 center ph3">
    {{ partial "breadcrumb.html" . }}
    <article>
      <header class="mb4">
        <p class="b helvetica tracked ttu mb0">
          {{ .CurrentSection.Title }}
        </p>
        {{- partialCached "social/share.html" . . -}}
        <h1 class="f2 fw6 mt2 mb4">
          {{- .Title -}}
        </h1>

        {{/* Event Details Section */}}
        <div class="mb4">
          {{/* Event Time */}}
          {{ with .Params.eventStart }}
          <div class="mb3">
            <span class="b">When:</span> 
            {{ $startDate := . }}
            {{ if eq (dateFormat "15:04" .) "00:00" }}
              {{ dateFormat "Monday, January 2, 2006" . }}
            {{ else }}
              {{ dateFormat "Monday, January 2, 2006 3:04 PM" . }}
            {{ end }}
            {{ with $.Params.eventEnd }}
              {{ if eq (dateFormat "2006-01-02" .) (dateFormat "2006-01-02" $startDate) }}
                {{ if eq (dateFormat "15:04" .) "00:00" }}
                  {{/* Same day, no end time - don't show anything */}}
                {{ else }}
                  - {{ dateFormat "3:04 PM" . }}
                {{ end }}
              {{ else }}
                - {{ if eq (dateFormat "15:04" .) "00:00" }}
                  {{ dateFormat "Monday, January 2, 2006" . }}
                {{ else }}
                  {{ dateFormat "Monday, January 2, 2006 3:04 PM" . }}
                {{ end }}
              {{ end }}
            {{ end }}
          </div>
          {{ end }}

          {{/* Venue(s) */}}
          <div class="mb3">
            <span class="b">{{ if gt (len .Params.venues) 1 }}Venues{{ else }}Venue{{ end }}: </span>
            {{- range $index, $venue := .Params.venues -}}
              {{- if $index }}, {{ end -}}
              <a href="{{ "/venues/" | relLangURL }}{{ . | strings.TrimSpace | urlize }}" class="link blue hover-dark-blue">{{ . | strings.TrimSpace }}</a>
            {{- end -}}
          </div>

          {{/* Organiser(s) */}}
          <div class="mb3">
            <span class="b">{{ if gt (len .Params.organisers) 1 }}Organisers{{ else }}Organiser{{ end }}: </span>
            {{- range $index, $organiser := .Params.organisers -}}
              {{- if $index }}, {{ end -}}
              <a href="{{ "/organisers/" | relLangURL }}{{ . | strings.TrimSpace | urlize }}" class="link blue hover-dark-blue">{{ . | strings.TrimSpace }}</a>
            {{- end -}}
          </div>

          {{/* Posted Date - only if needed */}}
          {{ if not .Date.IsZero }}
          <div class="f6 gray mt4">
            Posted: {{- .Date | time.Format "January 2, 2006" -}}
          </div>
          {{ end }}
        </div>
      </header>

      <div class="lh-copy">
        {{- .Content -}}
        {{- partial "tags.html" . -}}
      </div>

      <aside class="w-30-l mt6-l">
        {{- partial "menu-contextual.html" . -}}
      </aside>

    </article>
  </div>
{{ end }} 